{
    "type": "object",
    "patternProperties": {
        "^.*$": {
            "type": "object",
            "properties": {
                "group": { "type": "string"},
                "build": {
                    "type": "object",
                    "properties": {
                        "files": { "type": "string"},
                        "depends_on": { "type": "array", "items": { "type": "string"}},
                        "cflags": { "type": "string"},
                        "ldflags": { "type": "string"},
                        "cwd": { "type": "string"},
                        "variants": { "type": "array", "items": {"type": "string"}},
                        "make": {
                            "type": "object",
                            "properties": {
                                "target": {"type": "string"}
                            },
                            "additionalProperties": false
                        },
                        "sources": {
                            "type": "object",
                            "properties": {
                                "binary": {"type": "string"}
                            },
                            "additionalProperties": false
                        }
                        
                    },
                    "additionalProperties": false
                },
                "run": {
                    "type": "object",
                    "properties": {
                        "program": { "type": "string"},
                        "cwd": { "type": "string"},
                        "depends_on": { "type": "array", "items": { "type": "string"}},
                        "package_manager": {
                            "type" : "object",
                            "properties": {
                                "spack": { "type": "array", "items": {"type": "string"}},
                                "module": { "type": "array", "items": {"type": "string"}}
                            },
                            "additionalProperties": false
                        },
                        "environment": {
                            "type" : "object",
                            "patternProperties": {
                                "^.*$": {
                                    "oneOf": [
                                        {"type": "string"},
                                        {"type": "number"}
                                    ]
                                }
                            },
                            "additionalProperties": false
                        },
                        "iterate": {
                            "type" : "object",
                            "patternProperties": {
                                "program": {
                                    "type": "object",
                                    "properties": {
                                        "patternProperties": {
                                            "^.*$": {
                                                "type": "object",
                                                "properties": {
                                                    "option": { "type": "string"},
                                                    "numeric": { "type": "boolean"},
                                                    "type": { "type": "string", "enum": ["argument", "environment"]},
                                                    "position": { "type": "string", "enum": ["before", "after"]}
                                                }
                                            }
                                        }
                                    }
                                },
                                "^.*$": {
                                    "type": "object",
                                    "properties": {
                                        "values": {"type": "array"}
                                    }
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    "additionalProperties": false
                },
                "validate": {
                    "type": "object",
                    "properties": {
                        "script": {
                            "type": "object",
                            "properties": {
                                "path": {"type": "string"}
                            },
                            "additionalProperties": false
                        }
                    },
                    "additionalProperties": false
                },
                "artifacts": {
                    "type": "object",
                    "properties": {
                        
                    },
                    "additionalProperties": false
                }
            },
            "additionalProperties": false
        }
    },
    "additionalProperties": false
}
